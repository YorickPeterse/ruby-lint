# Contributing

For those wishing to contribute code to ruby-lint there are several
requirements that have to be met before their code is accepted into the
repository. These requirements and the corresponding steps involved are
described in this document.

## Licenses

ruby-lint is licensed under the MIT license (see the file "LICENSE" for the
specific details of this license) and thus all contributed code must be
compliant with this license. To keep things simple I do not accept code that is
licensed under a different license, even if it is an open source license.

For example, if you were to contribute a patch but license it under a specific
license, such as the GPL, then I will not accept it. All code should and will
always be licensed under the MIT license.

Some people might disagree with this license as it gives people too much
freedom to modify it themselves and not contribute back. Truth is, a license
isn't going to stop these people and I don't have the money (and interest) to
drag them to court in whatever country they live.

Long story short: everything is and will be licensed under the MIT license.

## Signing Off

Each commit, no matter how small, must be signed off using `git commit --sign`.
When signing off a commit you indicate that you have read and accepted both the
Developer's Certificate of Origin (found in the file DCO.md) as well as the
license (found in the file LICENSE). Commits that are not signed off, no matter
how useful, will **not** be accepted.

When signing your commits make sure your username and Email address are set
correctly, these can be set as following:

    $ git config --global --add user.name "YOUR NAME"
    $ git config --global --add user.email "YOUR EMAIL"

Once configured properly you can sign off commits using the following command:

    $ git commit --sign -m "Commit message goes in here"

## Commit Messages

Commit messages should follow the same standard as the Kernel/Git repository.
The first line of the commit acts as a short description of what the commit
does. Think of it as the subject of an Email: make it short and understandable.
The maximum amount of characters on this line is 50 characters.

Note that descriptions such as "Updated README.md" and "Changes" are not proper
descriptions and will result in me not accepting such commits.

The second line of the commit should be empty as it acts as a separator between
the subject and following lines. The following lines can be used to give a more
in-depth description of what the commit does. These lines must not be longer
than 79 characters per line.

An example of a good commit message is the following:

    Started completely re-writing the AST.

    The current AST that's being generated by RubyLint::Parser is overly complex
    and confusing due to the large number of classes used for different node types.
    After having a discussion about ASTs and the likes with @whitequark I decided
    that the AST generated by the parser has to be re-written from scratch.

    To make things easier I'm using "Furnace" which provides a simple, immutable
    class that can be used for representing nodes in an AST. Along with changing
    the AST will come various changes to the way the definitions list is built as
    well as how callback classes work (due to different event names being used).
    None of this will be backwards compatible with what I've currently pushed to
    Rubygems but that's expected when something is still alpha quality software.

    Signed-off-by: Yorick Peterse <yorickpeterse@gmail.com>

Example of a not so good commit message:

    ensure a http 302 redirect

The latter is bad because although it does state what it does (up to a certain
point) there's no in depth explanation. This means that I have to start digging
through code in order to find out what's going on. While I will always check
every commit added by somebody else there are times when the code is not clear
enough and I have no interest in spending an entire evening trying to
understand what somebody was trying to do.

## Coding Standards

* 2 spaces per indentation level for Ruby files, 4 spaces for the CSS files
  used for the documentation (chances are most people won't have to bother with
  these). Code that includes tabs for indentation will not be accepted.

* Code must be documented using YARD. At minimum you should document the
  parameters and return values, preferably it should also contain a short
  description and some examples when needed. The formatting of generic text
  (e.g. method descriptions) must be done using Markdown.

* The amount of dependencies, both runtime and development dependencies, should
  be kept to a minimum. This reduces the amount of potential risk factors both
  in terms of bugs as well as potential security issues.

* Nested modules/classes go into their own definitions, code such as `module
  Foo::Bar; ...; end` is a no-no.

* Test your code, code without tests will not be accepted. No excuses, it's
  very easy to test ruby-lint code so there's no reason not to do it. Tests
  must pass when submitting a pull request.

* Use common sense, I'm not going to hold your hands while you're writing
  patches.

* Do yourself a favour and open an issue *before* starting on big changes that
  I might reject. It would be a waste if you were to spend a week working on
  something only for me to reject it. You're also welcome to send me an Email
  but I prefer to keep ruby-lint related discussions on the issue tracker so
  other people can see it and potentially give their feedback.

* Do not touch the files LICENSE, version.rb, MANIFEST and DCO.md. The Gemspec
  (ruby-lint.gemspec) may only be modified when adding dependencies that are
  absolutely required and only after I have approved it. Last I want is for the
  gem to be broken because somebody messed with one of these files without me
  noticing.

## Language Requirements

Besides the various coding standards and commit requirements I also require
both code and commits to be written in proper English. A typo or grammar error
happens and isn't the end of the world but please double check your spelling
before committing something. If you use Vim you can enable spell checking by
running the following:

    set spell spelllang=en

The use of offensive or otherwise negative language aimed at other projects,
people, organizations and the likes is not allowed.
